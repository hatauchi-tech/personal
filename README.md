# 建築仕様書管理システム

## 概要
iPadを用いて顧客との打ち合わせ現場で建築仕様を簡単に入力し、正式な仕様書（PDF形式）を自動で生成するWebアプリケーションです。

## 主な機能

### 1. 案件管理機能
- 案件の一覧表示
- 案件の新規登録・編集
- 担当者名、お客様名、ステータス、部署による絞り込み機能

### 2. 仕様入力機能
- ひな形（標準仕様テンプレート）の選択機能
- 選択肢（プルダウン）からの入力
- 自由記述欄へのテキスト入力
- 物件に応じて項目（部屋など）の行を動的に追加・削除

### 3. 仕様書出力機能
- 入力内容を基にPDF形式の仕様書を自動生成
- 案件ごとに自動作成された共有フォルダに保存

### 4. 変更履歴管理機能
- 案件データの変更履歴を自動で記録・保存
- いつ、誰が、どの項目を、何から何へ変更したかを詳細に記録

### 5. ひな形管理機能
- 仕様書のベースとなる「ひな形」を複数パターン登録・編集
- 管理者権限を持つユーザーのみ利用可能

### 6. ユーザー管理機能
- 利用できる社員を登録・管理
- 管理者権限の設定機能

## 技術仕様

### フロントエンド
- HTML5 + CSS3 + JavaScript
- Tailwind CSS（レスポンシブデザイン）
- iPadでの操作性を重視したタッチフレンドリーなUI

### バックエンド
- Google Apps Script (GAS)
- Google スプレッドシート（データベース）
- Google ドキュメント（帳票テンプレート）
- Google ドライブ（ファイル保管）

## セットアップ手順

### 1. Google Apps Scriptプロジェクトの作成
1. [Google Apps Script](https://script.google.com/)にアクセス
2. 新しいプロジェクトを作成
3. `gas-backend.js`の内容をコピー&ペースト

### 2. スプレッドシートの準備
以下のシートを含むスプレッドシートを作成：
- 案件管理
- ユーザーマスタ
- IC仕様項目マスタ
- 設計仕様項目マスタ
- IC仕様入力データ
- 設計仕様入力データ
- 変更履歴ログ
- ひな形_標準
- ひな形_プレミアム
- ひな形_コンパクト

### 3. 設定値の更新
`gas-backend.js`内の以下の値を実際の値に更新：
```javascript
const SPREADSHEET_ID = 'YOUR_SPREADSHEET_ID_HERE';
const TEMPLATE_FOLDER_ID = 'YOUR_TEMPLATE_FOLDER_ID_HERE';
const OUTPUT_FOLDER_ID = 'YOUR_OUTPUT_FOLDER_ID_HERE';
```

### 4. HTMLファイルの追加
1. GASプロジェクトに`index.html`を追加
2. `index.html`の内容をコピー&ペースト

### 5. Webアプリとしてデプロイ
1. GASプロジェクトで「デプロイ」→「新しいデプロイ」
2. 種類を「ウェブアプリ」に設定
3. 実行ユーザーを「自分」に設定
4. アクセスできるユーザーを適切に設定
5. デプロイを実行

## 利用方法

### 1. ログイン
- デプロイされたWebアプリのURLにアクセス
- Googleアカウントでログイン

### 2. 案件の作成・選択
- 「新規案件作成」ボタンから新しい案件を作成
- または既存の案件を一覧から選択

### 3. 仕様入力
- 適切なひな形を選択
- 設計仕様・IC仕様タブを切り替えて入力
- 必要に応じて部屋を追加・削除

### 4. PDF出力
- 「PDF出力」ボタンをクリック
- 生成されたPDFをダウンロード

## データ構造

### 案件管理シート
| 列 | 項目名 | 説明 |
|---|---|---|
| A | 案件ID | 自動生成される一意のID |
| B | お客様名 | お客様の名前 |
| C | 物件名 | 物件の名称 |
| D | 号地 | 区画番号 |
| E | 担当者 | 担当者名 |
| F | ステータス | 打ち合わせ中/仕様確定/完了 |
| G | 部署 | 担当部署 |
| H | 作成日時 | 案件作成日時 |
| I | 更新日時 | 最終更新日時 |

### ユーザーマスタシート
| 列 | 項目名 | 説明 |
|---|---|---|
| A | 氏名 | ユーザーの氏名 |
| B | メールアドレス | Googleアカウントのメール |
| C | 部署 | 所属部署 |
| D | 権限 | 一般/管理者 |
| E | 有効フラグ | TRUE/FALSE |

## セキュリティ

- Googleアカウントによる認証
- ユーザーマスタによるアクセス制御
- 変更履歴の完全な記録
- データはGoogle Workspace内で管理

## サポート・メンテナンス

### ログの確認
- GASの実行ログで動作状況を確認
- 変更履歴ログシートで操作履歴を確認

### バックアップ
- スプレッドシートの定期的なバックアップを推奨
- 重要なテンプレートファイルのバックアップ

### トラブルシューティング
1. ログイン時のエラー → ユーザーマスタの確認
2. PDF生成エラー → テンプレートドキュメントの確認
3. データ保存エラー → スプレッドシートの権限確認

## 今後の拡張予定

- モバイルアプリ化
- オフライン対応
- より詳細な権限管理
- 承認ワークフロー機能
- 外部システムとの連携（アンドパッド等）

## ライセンス

このプロジェクトは社内利用を目的として開発されています。